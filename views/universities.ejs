<%- include('partials/header') %>

<!-- Import Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:wght@400;700&family=Source+Sans+3:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
    /* ========================================
       UNIVERSITIES PAGE - ACADEMIC THEME
       ======================================== */
    
    /* Global Scrollbar Hide */
    html, body {
        overflow-x: hidden;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    ::-webkit-scrollbar {
        display: none;
    }

    /* Hero Section - Background Image with Black Overlay */
    .universities-hero {
        position: relative;
        width: 100%;
        min-height: 180px;
        overflow: hidden;
        background: #000000;
        padding: 60px 5% 40px;
        display: flex;
        align-items: center;
        border-bottom: 2px solid #000000;
    }

    /* Background Image */
    .universities-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-image: url('https://images.unsplash.com/photo-1523050854058-8df90110c9f1?w=1920&q=80');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        z-index: 0;
    }

    /* Black Overlay */
    .universities-hero::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.65);
        z-index: 1;
    }

    .universities-hero-content {
        max-width: 1200px;
        width: 100%;
        margin: 0 auto;
        position: relative;
        z-index: 2;
        text-align: left;
    }

    .universities-hero h1 {
        font-family: 'Libre Baskerville', Georgia, serif;
        font-size: 2.4rem;
        font-weight: 700;
        margin-bottom: 20px;
        color: #FFFFFF;
        line-height: 1.3;
        letter-spacing: -0.01em;
        text-decoration: none;
    }

    .universities-hero p {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 1rem;
        line-height: 1.6;
        font-weight: 400;
        color: rgba(255, 255, 255, 0.85);
        max-width: 800px;
    }

    /* Mobile Breadcrumb - Hidden on Desktop - MATCHING COURSE DETAIL SIZE */
    .mobile-breadcrumb-section {
        display: none;
        background: #F7F8FA;
        padding: 20px 5%;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }

    /* Elevated Breadcrumb with Rounded Box and Full-Height Dividers - EXACTLY MATCHING COURSE DETAIL */
    .mobile-breadcrumb {
        display: inline-flex;
        align-items: stretch;
        gap: 0;
        margin-bottom: 0;
        font-size: 0.75rem;
        color: #4B5563;
        background: #FFFFFF;
        border-radius: 50px;
        padding: 10px 20px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
        border: 1px solid rgba(0, 0, 0, 0.08);
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        font-weight: 500;
        min-height: 40px;
    }

    .mobile-breadcrumb a,
    .mobile-breadcrumb span {
        color: #4B5563;
        text-decoration: none;
        transition: all 0.2s ease;
        padding: 0 15px;
        position: relative;
        display: flex;
        align-items: center;
    }

    .mobile-breadcrumb a:hover {
        color: #2C5F8D;
    }

    /* Full-height vertical divider lines - NO "/" text */
    .mobile-breadcrumb a::after {
        content: '';
        position: absolute;
        right: 0;
        top: 0;
        bottom: 0;
        width: 1px;
        height: 100%;
        background: rgba(0, 0, 0, 0.15);
    }

    .mobile-breadcrumb a:last-of-type::after {
        display: none;
    }

    .mobile-breadcrumb span {
        font-weight: 600;
        color: #2C5F8D;
    }

    /* Mobile Filter Button - Hidden on Desktop */
    .mobile-filter-button {
        display: none;
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: #2C5F8D;
        color: #FFFFFF;
        border: none;
        border-radius: 50px;
        padding: 14px 24px;
        font-size: 0.9rem;
        font-weight: 600;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        box-shadow: 0 4px 12px rgba(44, 95, 141, 0.4);
        cursor: pointer;
        z-index: 998;
        transition: all 0.3s ease;
        gap: 8px;
        align-items: center;
    }

    .mobile-filter-button:hover {
        background: #1E4364;
        transform: translateY(-2px);
        box-shadow: 0 6px 16px rgba(44, 95, 141, 0.5);
    }

    .mobile-filter-button i {
        font-size: 1rem;
    }

    /* Filter Modal Overlay */
    .filter-modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        animation: fadeIn 0.3s ease;
    }

    .filter-modal-overlay.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    /* Filter Modal */
    .filter-modal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: #FFFFFF;
        border-radius: 12px;
        width: 90%;
        max-width: 420px;
        max-height: 85vh;
        overflow-y: auto;
        z-index: 1000;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        animation: slideUp 0.3s ease;
    }

    .filter-modal.active {
        display: block;
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translate(-50%, -40%);
        }
        to {
            opacity: 1;
            transform: translate(-50%, -50%);
        }
    }

    /* Modal Header */
    .filter-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 24px 28px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        position: sticky;
        top: 0;
        background: #FFFFFF;
        z-index: 10;
        border-radius: 12px 12px 0 0;
    }

    .filter-modal-title {
        font-family: 'Libre Baskerville', Georgia, serif;
        font-size: 1.3rem;
        font-weight: 600;
        color: #1B1F24;
        margin: 0;
        letter-spacing: -0.01em;
    }

    .filter-modal-close {
        background: transparent;
        border: none;
        font-size: 1.5rem;
        color: #6B7280;
        cursor: pointer;
        padding: 4px;
        line-height: 1;
        transition: all 0.2s ease;
        width: 32px;
        height: 32px;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 50%;
    }

    .filter-modal-close:hover {
        background: rgba(0, 0, 0, 0.05);
        color: #1B1F24;
    }

    /* Modal Body with Better Spacing */
    .filter-modal-body {
        padding: 28px;
    }

    /* Modal Filter Section Spacing */
    .filter-modal-body .filter-section {
        margin-bottom: 28px;
    }

    .filter-modal-body .filter-section:last-of-type {
        margin-bottom: 20px;
    }

    .filter-modal-body .filter-title {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 0.9rem;
        font-weight: 600;
        color: #1B1F24;
        margin-bottom: 14px;
        text-transform: uppercase;
        letter-spacing: 0.08em;
        padding-bottom: 10px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .filter-modal-body .filter-dropdown {
        width: 100%;
        padding: 14px 16px;
        background: #F7F8FA;
        border: 1px solid rgba(0, 0, 0, 0.12);
        border-radius: 6px;
        color: #1B1F24;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.2s ease;
        line-height: 1.5;
    }

    .filter-modal-body .filter-dropdown:focus {
        outline: none;
        border-color: #2C5F8D;
        box-shadow: 0 0 0 3px rgba(44, 95, 141, 0.1);
        background: #FFFFFF;
    }

    .filter-modal-body .filter-group {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .filter-modal-body .filter-radio {
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        padding: 12px 14px;
        border-radius: 6px;
        transition: all 0.2s ease;
    }

    .filter-modal-body .filter-radio:hover {
        background: rgba(44, 95, 141, 0.05);
    }

    .filter-modal-body .custom-radio {
        width: 18px;
        height: 18px;
        border: 2px solid rgba(0, 0, 0, 0.3);
        border-radius: 50%;
        background: transparent;
        position: relative;
        flex-shrink: 0;
        transition: all 0.2s ease;
    }

    .filter-modal-body .filter-radio input:checked + .custom-radio {
        background: #2C5F8D;
        border-color: #2C5F8D;
    }

    .filter-modal-body .filter-radio input:checked + .custom-radio::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 7px;
        height: 7px;
        background: #FFFFFF;
        border-radius: 50%;
    }

    .filter-modal-body .filter-label {
        color: #4B5563;
        font-size: 0.95rem;
        font-weight: 400;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        line-height: 1.5;
        letter-spacing: 0.01em;
    }

    .filter-modal-body .filter-count {
        margin-left: auto;
        background: rgba(44, 95, 141, 0.1);
        color: #2C5F8D;
        padding: 4px 10px;
        border-radius: 12px;
        font-size: 0.8rem;
        font-weight: 600;
        min-width: 28px;
        text-align: center;
    }

    .filter-modal-body .budget-range {
        padding: 16px 0;
    }

    .filter-modal-body .budget-display {
        display: flex;
        justify-content: space-between;
        margin-top: 14px;
        color: #6B7280;
        font-weight: 500;
        font-size: 0.85rem;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .filter-modal-body .range-slider {
        width: 100%;
        height: 5px;
        -webkit-appearance: none;
        background: rgba(0, 0, 0, 0.1);
        border-radius: 3px;
        outline: none;
    }

    .filter-modal-body .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 18px;
        height: 18px;
        background: #2C5F8D;
        border: 2px solid #FFFFFF;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    .filter-modal-body .range-slider::-moz-range-thumb {
        width: 18px;
        height: 18px;
        background: #2C5F8D;
        border: 2px solid #FFFFFF;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    .filter-modal-body .reset-filters {
        width: 100%;
        padding: 14px 20px;
        background: #2C5F8D;
        color: #FFFFFF;
        border: none;
        border-radius: 50px;
        font-weight: 600;
        font-size: 0.95rem;
        cursor: pointer;
        transition: all 0.2s ease;
        margin-top: 8px;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        letter-spacing: 0.02em;
    }

    .filter-modal-body .reset-filters:hover {
        background: #1E4364;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(44, 95, 141, 0.3);
    }

    /* Search Section */
    .search-section {
        padding: 50px 5%;
        background: #F7F8FA;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }

    .search-container {
        max-width: 800px;
        margin: 0 auto;
    }

    .search-title {
        text-align: center;
        font-family: 'Libre Baskerville', Georgia, serif;
        font-size: 1.5rem;
        font-weight: 600;
        color: #1B1F24;
        margin-bottom: 30px;
        letter-spacing: -0.01em;
        text-decoration: none;
    }

    /* Search Form with CIRCULAR EDGES */
    .search-form {
        display: flex;
        max-width: 700px;
        margin: 0 auto;
        background: #FFFFFF;
        border: 1px solid rgba(0, 0, 0, 0.12);
        border-radius: 50px;
        overflow: hidden;
        transition: all 0.2s ease;
    }

    .search-form:focus-within {
        border-color: #2C5F8D;
        box-shadow: 0 0 0 3px rgba(44, 95, 141, 0.1);
    }

    .search-input {
        flex: 1;
        padding: 16px 24px;
        font-size: 1rem;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        border: none;
        background: transparent;
        color: #1B1F24;
        outline: none;
        border-radius: 50px 0 0 50px;
    }

    .search-input::placeholder {
        color: #9CA3AF;
    }

    .search-divider {
        width: 1px;
        background: rgba(0, 0, 0, 0.12);
        align-self: stretch;
    }

    .search-button {
        padding: 16px 32px;
        background: transparent;
        color: #2C5F8D;
        border: none;
        font-size: 1rem;
        font-weight: 600;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        cursor: pointer;
        transition: all 0.2s ease;
        white-space: nowrap;
        display: flex;
        align-items: center;
        gap: 8px;
        border-radius: 0 50px 50px 0;
    }

    .search-button:hover {
        background: rgba(44, 95, 141, 0.05);
    }

    .search-button-text {
        display: inline;
    }

    /* Main Layout */
    .universities-main {
        display: flex;
        min-height: 800px;
        background: #FFFFFF;
        position: relative;
    }

    /* Filter Sidebar */
    .filter-sidebar {
        width: 280px;
        flex-shrink: 0;
        background: #F7F8FA;
        padding: 40px 20px;
        border-right: 1px solid rgba(0, 0, 0, 0.08);
        position: sticky;
        top: 0;
        height: 100vh;
        overflow-y: auto;
        resize: horizontal;
        min-width: 250px;
        max-width: 400px;
    }

    .filter-sidebar::-webkit-scrollbar {
        width: 0;
        height: 0;
    }

    .filter-section {
        margin-bottom: 32px;
    }

    .filter-title {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 0.875rem;
        font-weight: 600;
        color: #1B1F24;
        margin-bottom: 12px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        padding-bottom: 8px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }

    .filter-dropdown {
        width: 100%;
        padding: 12px;
        background: #FFFFFF;
        border: 1px solid rgba(0, 0, 0, 0.12);
        border-radius: 4px;
        color: #1B1F24;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.2s ease;
    }

    .filter-dropdown:focus {
        outline: none;
        border-color: #2C5F8D;
        box-shadow: 0 0 0 3px rgba(44, 95, 141, 0.1);
    }

    .filter-dropdown option {
        background: #FFFFFF;
        color: #1B1F24;
        padding: 10px;
    }

    .filter-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .filter-radio {
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
        padding: 8px 10px;
        border-radius: 4px;
        transition: all 0.2s ease;
    }

    .filter-radio:hover {
        background: rgba(44, 95, 141, 0.05);
    }

    .filter-radio input {
        display: none;
    }

    .custom-radio {
        width: 16px;
        height: 16px;
        border: 2px solid rgba(0, 0, 0, 0.3);
        border-radius: 50%;
        background: transparent;
        position: relative;
        flex-shrink: 0;
        transition: all 0.2s ease;
    }

    .filter-radio input:checked + .custom-radio {
        background: #2C5F8D;
        border-color: #2C5F8D;
    }

    .filter-radio input:checked + .custom-radio::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 6px;
        height: 6px;
        background: #FFFFFF;
        border-radius: 50%;
    }

    .filter-label {
        color: #4B5563;
        font-size: 0.875rem;
        font-weight: 400;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .filter-count {
        margin-left: auto;
        background: rgba(44, 95, 141, 0.1);
        color: #2C5F8D;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.75rem;
        font-weight: 600;
        min-width: 24px;
        text-align: center;
    }

    .budget-range {
        padding: 15px 0;
    }

    .budget-display {
        display: flex;
        justify-content: space-between;
        margin-top: 10px;
        color: #6B7280;
        font-weight: 500;
        font-size: 0.75rem;
    }

    .range-slider {
        width: 100%;
        height: 4px;
        -webkit-appearance: none;
        background: rgba(0, 0, 0, 0.1);
        border-radius: 2px;
        outline: none;
    }

    .range-slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 16px;
        height: 16px;
        background: #2C5F8D;
        border: 2px solid #FFFFFF;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .range-slider::-moz-range-thumb {
        width: 16px;
        height: 16px;
        background: #2C5F8D;
        border: 2px solid #FFFFFF;
        border-radius: 50%;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }

    .reset-filters {
        width: 100%;
        padding: 12px;
        background: #2C5F8D;
        color: #FFFFFF;
        border: none;
        border-radius: 50px;
        font-weight: 600;
        font-size: 0.875rem;
        cursor: pointer;
        transition: all 0.2s ease;
        margin-top: 20px;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .reset-filters:hover {
        background: #1E4364;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(44, 95, 141, 0.3);
    }

    /* Content Area */
    .content-area {
        flex: 1;
        padding: 40px;
        background: #FFFFFF;
        overflow-y: auto;
        max-height: calc(100vh);
    }

    /* Page Header with Toggle */
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
    }

    .page-header-left h1 {
        font-family: 'Libre Baskerville', Georgia, serif;
        font-size: 1.75rem;
        font-weight: 600;
        color: #1B1F24;
        letter-spacing: -0.01em;
        text-decoration: none;
        margin-bottom: 8px;
    }

    .page-count {
        font-size: 0.875rem;
        color: #6B7280;
        font-weight: 400;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    /* View Toggle Buttons */
    .view-toggle {
        display: flex;
        gap: 4px;
        background: #F7F8FA;
        padding: 4px;
        border-radius: 20px;
        border: 1px solid rgba(0, 0, 0, 0.08);
    }

    .view-btn {
        padding: 8px 16px;
        background: transparent;
        border: none;
        border-radius: 16px;
        cursor: pointer;
        transition: all 0.2s ease;
        color: #6B7280;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 6px;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        font-weight: 500;
    }

    .view-btn:hover {
        background: rgba(44, 95, 141, 0.05);
        color: #2C5F8D;
    }

    .view-btn.active {
        background: #2C5F8D;
        color: #FFFFFF;
    }

    .view-btn i {
        font-size: 1rem;
    }

    /* LIST VIEW - Cards with metrics on right */
    .universities-list {
        display: flex;
        flex-direction: column;
        gap: 24px;
    }

    .universities-list .university-card {
        background: #FFFFFF;
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 8px;
        padding: 32px;
        transition: all 0.2s ease;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.04);
    }

    .universities-list .university-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.08);
        border-color: rgba(44, 95, 141, 0.3);
    }

    .universities-list .university-left,
    .universities-list .university-right {
        position: relative;
        z-index: 2;
    }

    .universities-list .university-left {
        flex: 1;
    }

    .universities-list .university-name {
        font-family: 'Libre Baskerville', Georgia, serif;
        font-size: 1.5rem;
        font-weight: 600;
        color: #1B1F24;
        margin-bottom: 20px;
        letter-spacing: -0.01em;
        line-height: 1.3;
        text-decoration: none;
    }

    .universities-list .university-details-left {
        display: flex;
        flex-direction: column;
        gap: 12px;
        margin-bottom: 24px;
    }

    .universities-list .detail-row {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 0.95rem;
        color: #4B5563;
        font-weight: 400;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .universities-list .detail-row i {
        color: #2C5F8D;
        width: 20px;
        text-align: center;
    }

    .universities-list .visit-button {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 12px 24px;
        background: #2C5F8D;
        color: #FFFFFF;
        border: none;
        border-radius: 4px;
        font-weight: 600;
        font-size: 0.875rem;
        text-decoration: none;
        transition: all 0.2s ease;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .universities-list .visit-button:hover {
        background: #1E4364;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(44, 95, 141, 0.3);
        text-decoration: none;
    }

    .universities-list .university-right {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        width: 320px;
        margin-left: 40px;
    }

    .universities-list .stat-item {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 8px 0;
    }

    .universities-list .stat-icon {
        font-size: 1.5rem;
        color: #2C5F8D;
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        flex-shrink: 0;
    }

    .universities-list .stat-content {
        display: flex;
        flex-direction: column;
        flex: 1;
    }

    .universities-list .stat-label {
        font-size: 0.7rem;
        color: #6B7280;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: 4px;
        line-height: 1.2;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .universities-list .stat-value {
        font-size: 1.125rem;
        font-weight: 700;
        color: #1B1F24;
        line-height: 1;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    /* GRID VIEW - 3 Column Horizontal Stats - SMALLER ICONS */
    .universities-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 24px;
    }

    .universities-grid .university-card {
        background: #FFFFFF;
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 8px;
        padding: 24px;
        transition: all 0.2s ease;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06), 0 2px 4px rgba(0, 0, 0, 0.04);
    }

    .universities-grid .university-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.12), 0 4px 8px rgba(0, 0, 0, 0.08);
        border-color: rgba(44, 95, 141, 0.3);
    }

    .universities-grid .university-name {
        font-family: 'Libre Baskerville', Georgia, serif;
        font-size: 1.25rem;
        font-weight: 600;
        color: #1B1F24;
        margin-bottom: 16px;
        letter-spacing: -0.01em;
        line-height: 1.3;
        text-decoration: none;
        padding-right: 90px;
    }

    .universities-grid .university-location {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 0.875rem;
        color: #6B7280;
        margin-bottom: 12px;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    .universities-grid .university-location i {
        color: #2C5F8D;
        font-size: 0.875rem;
    }

    .universities-grid .university-programmes {
        display: flex;
        align-items: center;
        gap: 6px;
        font-size: 0.875rem;
        color: #2C5F8D;
        margin-bottom: 24px;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        font-weight: 500;
    }

    .universities-grid .university-programmes i {
        font-size: 0.875rem;
    }

    /* 3-COLUMN HORIZONTAL GRID STATS - FIXED STABLE LAYOUT */
    .universities-grid .grid-stats {
        display: grid !important;
        grid-template-columns: repeat(3, 1fr) !important;
        gap: 16px;
        padding-top: 20px;
        border-top: 1px solid rgba(0, 0, 0, 0.06);
    }

    .universities-grid .grid-stat-item {
        display: flex !important;
        flex-direction: column !important;
        align-items: center !important;
        text-align: center !important;
        min-width: 0;
    }

    .universities-grid .grid-stat-icon {
        font-size: 1.5rem !important;
        color: #2C5F8D !important;
        margin-bottom: 8px !important;
        flex-shrink: 0;
    }

    .universities-grid .grid-stat-label {
        font-size: 0.7rem !important;
        color: #6B7280 !important;
        font-weight: 600 !important;
        text-transform: uppercase !important;
        letter-spacing: 0.05em !important;
        margin-bottom: 6px !important;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
        white-space: nowrap;
    }

    .universities-grid .grid-stat-value {
        font-size: 1.25rem !important;
        font-weight: 700 !important;
        color: #1B1F24 !important;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
        white-space: nowrap;
    }

    /* Hide elements based on view */
    .universities-grid .university-left,
    .universities-grid .university-right,
    .universities-grid .university-details-left,
    .universities-grid .visit-button {
        display: none !important;
    }

    .universities-list .university-location,
    .universities-list .university-programmes,
    .universities-list .grid-stats,
    .universities-list .grid-title {
        display: none !important;
    }

    /* Featured Badge with CURVED Corners */
    .featured-badge {
        position: absolute;
        top: 16px;
        right: 16px;
        background: #22C55E;
        color: #FFFFFF;
        padding: 6px 12px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        border-radius: 16px;
        z-index: 3;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        box-shadow: 0 2px 6px rgba(34, 197, 94, 0.3);
    }

    /* CTA Section - Matching Course Detail Page */
    .cta-section {
        background: #FFFFFF;
        padding: 60px 5%;
        text-align: center;
        border-top: 1px solid rgba(0, 0, 0, 0.08);
    }

    .cta-content h2 {
        font-family: 'Libre Baskerville', Georgia, serif;
        font-size: 1.6rem;
        font-weight: 600;
        color: #1B1F24;
        margin-bottom: 16px;
        line-height: 1.3;
        letter-spacing: -0.01em;
        text-decoration: none;
        position: relative;
        display: inline-block;
        padding-bottom: 0;
    }

    /* Remove decorative elements */
    .cta-content h2::after,
    .cta-content h2::before {
        display: none !important;
    }

    .cta-content p {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        font-size: 0.9rem;
        margin-bottom: 30px;
        color: #4B5563;
    }

    .cta-buttons {
        display: flex;
        justify-content: center;
        gap: 16px;
        flex-wrap: wrap;
    }

    .cta-btn-primary, .cta-btn-secondary {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.85rem 1.8rem;
        font-size: 0.8rem;
        font-weight: 600;
        text-decoration: none;
        cursor: pointer;
        transition: all 0.25s ease;
        border-radius: 24px;
        border: none;
    }

    .cta-btn-primary {
        background-color: #2C5F8D;
        color: #FFFFFF;
    }

    .cta-btn-secondary {
        background-color: transparent;
        color: #2C5F8D;
        border: 2px solid #2C5F8D;
    }

    .cta-btn-primary:hover {
        background-color: #1E4364;
        transform: translateY(-2px);
        text-decoration: none;
    }

    .cta-btn-secondary:hover {
        background-color: rgba(44, 95, 141, 0.08);
        transform: translateY(-2px);
        text-decoration: none;
    }

    .cta-btn-primary i, .cta-btn-secondary i {
        margin-right: 8px;
        font-size: 0.85rem;
    }

    /* No Results */
    .no-results {
        text-align: center;
        padding: 80px 40px;
        background: #F7F8FA;
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 8px;
        max-width: 600px;
        margin: 0 auto;
        display: none;
    }

    .no-results.show {
        display: block;
    }

    .no-results i {
        font-size: 3rem;
        color: rgba(0, 0, 0, 0.15);
        margin-bottom: 16px;
    }

    .no-results h3 {
        font-family: 'Libre Baskerville', Georgia, serif;
        font-size: 1.5rem;
        font-weight: 600;
        color: #1B1F24;
        margin-bottom: 12px;
        text-decoration: none;
    }

    .no-results p {
        font-size: 1rem;
        color: #6B7280;
        margin-bottom: 24px;
        line-height: 1.6;
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    /* Resize handle */
    .resize-handle {
        position: absolute;
        top: 0;
        right: -2px;
        width: 4px;
        height: 100%;
        background: rgba(44, 95, 141, 0.2);
        cursor: ew-resize;
        z-index: 10;
        transition: background 0.2s ease;
    }

    .resize-handle:hover {
        background: #2C5F8D;
    }

    /* RESPONSIVE */
    @media (max-width: 1024px) {
        .universities-main {
            flex-direction: column;
        }

        .filter-sidebar {
            width: 100% !important;
            height: auto;
            position: relative;
            border-right: none;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
            overflow-x: auto;
            overflow-y: hidden;
            resize: none;
            padding: 20px;
            display: flex;
            flex-wrap: nowrap;
            gap: 24px;
        }

        .filter-section {
            margin-bottom: 0;
            flex: 0 0 auto;
            min-width: 200px;
        }

        .resize-handle {
            display: none;
        }

        .content-area {
            max-height: none;
            overflow-y: visible;
            padding: 30px;
        }

        .page-header {
            flex-direction: column;
            gap: 16px;
        }

        .universities-list .university-card {
            flex-direction: column;
        }

        .universities-list .university-right {
            width: 100%;
            margin-left: 0;
            margin-top: 24px;
        }

        .universities-grid {
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        }
    }

    @media (max-width: 768px) {
        /* Hide Hero Section on Mobile */
        .universities-hero {
            display: none !important;
        }

        /* Show Mobile Breadcrumb - SAME SIZE AS COURSE DETAIL */
        .mobile-breadcrumb-section {
            display: block;
        }

        /* Smaller breadcrumb on mobile - EXACTLY MATCHING COURSE DETAIL */
        .mobile-breadcrumb {
            font-size: 0.65rem;
            padding: 8px 14px;
            min-height: 32px;
        }

        .mobile-breadcrumb a,
        .mobile-breadcrumb span {
            padding: 0 10px;
        }

        /* HIDE DESKTOP FILTER SIDEBAR ON MOBILE */
        .filter-sidebar {
            display: none !important;
        }

        /* SHOW MOBILE FILTER BUTTON */
        .mobile-filter-button {
            display: inline-flex;
        }

        /* Fix Search Button Alignment on Mobile */
        .search-form {
            flex-direction: row;
        }

        .search-button {
            padding: 16px 16px;
            min-width: 50px;
        }

        .search-button-text {
            display: none;
        }

        .search-button i {
            margin: 0;
        }

        /* BOTH LIST AND GRID SHOW SAME CARD DESIGN ON MOBILE */
        .universities-list,
        .universities-grid {
            display: grid !important;
            grid-template-columns: 1fr !important;
            gap: 20px;
        }

        .universities-list .university-card,
        .universities-grid .university-card {
            display: block !important;
            padding: 24px !important;
        }

        /* Hide List View Specific Elements on Mobile */
        .universities-list .university-left,
        .universities-list .university-right,
        .universities-list .university-details-left,
        .universities-list .visit-button {
            display: none !important;
        }

        /* Show Grid View Elements for BOTH List and Grid on Mobile */
        .universities-list .university-location,
        .universities-list .university-programmes,
        .universities-list .grid-stats,
        .universities-list .grid-title,
        .universities-grid .university-location,
        .universities-grid .university-programmes,
        .universities-grid .grid-stats,
        .universities-grid .university-name {
            display: block !important;
        }

        .universities-list .grid-stats,
        .universities-grid .grid-stats {
            display: grid !important;
            grid-template-columns: repeat(3, 1fr) !important;
            gap: 12px !important;
            padding-top: 20px !important;
            border-top: 1px solid rgba(0, 0, 0, 0.06) !important;
        }

        .universities-list .university-location,
        .universities-grid .university-location {
            display: flex !important;
        }

        .universities-list .university-programmes,
        .universities-grid .university-programmes {
            display: flex !important;
        }

        /* Hide View Toggle on Mobile */
        .view-toggle {
            display: none !important;
        }

        /* Mobile Card Design - SAME FOR BOTH LIST AND GRID */
        .universities-list .grid-title,
        .universities-grid .university-name {
            font-size: 1.1rem !important;
            font-weight: 600 !important;
            margin-bottom: 16px !important;
            line-height: 1.3 !important;
            padding-right: 90px !important;
        }

        .universities-list .university-location,
        .universities-grid .university-location {
            font-size: 0.8rem !important;
            margin-bottom: 10px !important;
            color: #6B7280 !important;
        }

        .universities-list .university-programmes,
        .universities-grid .university-programmes {
            font-size: 0.8rem !important;
            margin-bottom: 20px !important;
        }

        /* 3-COLUMN HORIZONTAL GRID ON MOBILE - STABLE ALIGNMENT */
        .universities-list .grid-stat-item,
        .universities-grid .grid-stat-item {
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            text-align: center !important;
            min-width: 0 !important;
        }

        .universities-list .grid-stat-icon,
        .universities-grid .grid-stat-icon {
            font-size: 1.4rem !important;
            margin-bottom: 8px !important;
            color: #2C5F8D !important;
            flex-shrink: 0 !important;
        }

        .universities-list .grid-stat-label,
        .universities-grid .grid-stat-label {
            font-size: 0.65rem !important;
            margin-bottom: 4px !important;
            text-transform: uppercase !important;
            letter-spacing: 0.05em !important;
            color: #6B7280 !important;
            white-space: nowrap !important;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
        }

        .universities-list .grid-stat-value,
        .universities-grid .grid-stat-value {
            font-size: 1.15rem !important;
            font-weight: 700 !important;
            color: #1B1F24 !important;
            white-space: nowrap !important;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif !important;
        }

        /* Featured Badge Mobile Size */
        .featured-badge {
            padding: 5px 12px !important;
            font-size: 0.65rem !important;
            top: 16px !important;
            right: 16px !important;
            border-radius: 16px !important;
        }

        /* CTA Section Mobile */
        .cta-section {
            padding: 50px 5%;
        }

        .cta-content h2 {
            font-size: 1.4rem;
        }

        .cta-content p {
            font-size: 0.85rem;
        }

        .cta-buttons {
            flex-direction: column;
            align-items: center;
        }

        .cta-btn-primary, .cta-btn-secondary {
            width: 100%;
            max-width: 280px;
        }
    }

    @media (max-width: 600px) {
        .page-header-left h1 {
            font-size: 1.4rem;
        }

        .content-area {
            padding: 20px;
        }

        .cta-content h2 {
            font-size: 1.2rem;
        }

        /* Extra Small Mobile - Breadcrumb size matches course detail */
        .mobile-breadcrumb {
            font-size: 0.6rem;
            padding: 6px 12px;
            min-height: 28px;
        }

        .mobile-breadcrumb a,
        .mobile-breadcrumb span {
            padding: 0 8px;
        }

        /* Extra small breadcrumb on very small screens */
        .universities-list .grid-title,
        .universities-grid .university-name {
            font-size: 1rem !important;
            padding-right: 85px !important;
        }

        .universities-list .university-location,
        .universities-list .university-programmes,
        .universities-grid .university-location,
        .universities-grid .university-programmes {
            font-size: 0.75rem !important;
        }

        .universities-list .grid-stat-value,
        .universities-grid .grid-stat-value {
            font-size: 1.05rem !important;
        }

        .universities-list .grid-stat-label,
        .universities-grid .grid-stat-label {
            font-size: 0.6rem !important;
        }

        .universities-list .grid-stat-icon,
        .universities-grid .grid-stat-icon {
            font-size: 1.3rem !important;
        }
    }
</style>

<!-- Hero Section - Hidden on Mobile -->
<section class="universities-hero">
    <div class="universities-hero-content">
        <h1>Explore Universities</h1>
        <p>Discover premier educational institutions offering diverse programs and exceptional opportunities.</p>
    </div>
</section>

<!-- Mobile Breadcrumb Section - Visible Only on Mobile -->
<section class="mobile-breadcrumb-section">
    <div class="mobile-breadcrumb">
        <a href="/">Home</a>
        <span>Universities</span>
    </div>
</section>

<!-- Search Section -->
<section class="search-section">
    <div class="search-container">
        <h2 class="search-title">Find Your University</h2>
        <form class="search-form" id="universitySearchForm">
            <input type="text" class="search-input" placeholder="Search by name, location, or course..." id="searchInput">
            <div class="search-divider"></div>
            <button type="submit" class="search-button">
                <i class="fas fa-search"></i>
                <span class="search-button-text">Search</span>
            </button>
        </form>
    </div>
</section>

<!-- Mobile Filter Button -->
<button class="mobile-filter-button" id="mobileFilterBtn">
    <i class="fas fa-filter"></i>
    Filters
</button>

<!-- Filter Modal Overlay -->
<div class="filter-modal-overlay" id="filterModalOverlay"></div>

<!-- Filter Modal -->
<div class="filter-modal" id="filterModal">
    <div class="filter-modal-header">
        <h3 class="filter-modal-title">Filters</h3>
        <button class="filter-modal-close" id="closeFilterModal">
            <i class="fas fa-times"></i>
        </button>
    </div>
    <div class="filter-modal-body">
        <!-- Programmes Dropdown -->
        <div class="filter-section">
            <h3 class="filter-title">Programmes</h3>
            <select class="filter-dropdown auto-filter" id="programmesFilterModal">
                <option value="all">All Programmes</option>
                <option value="engineering">Engineering & Technology</option>
                <option value="management">Business & Management</option>
                <option value="computer">Computer Science & IT</option>
                <option value="law">Law & Legal Studies</option>
                <option value="medical">Medical & Health Sciences</option>
                <option value="sciences">Sciences</option>
                <option value="arts">Arts & Humanities</option>
                <option value="architecture">Architecture</option>
                <option value="pharmacy">Pharmacy</option>
                <option value="design">Design</option>
                <option value="education">Education</option>
            </select>
        </div>

        <!-- State Filter -->
        <div class="filter-section">
            <h3 class="filter-title">State</h3>
            <select class="filter-dropdown auto-filter" id="stateFilterModal">
                <option value="all">All States</option>
                <option value="gujarat">Gujarat</option>
                <option value="maharashtra">Maharashtra</option>
                <option value="uttar pradesh">Uttar Pradesh</option>
                <option value="rajasthan">Rajasthan</option>
                <option value="delhi">Delhi</option>
                <option value="karnataka">Karnataka</option>
                <option value="tamilnadu">Tamil Nadu</option>
            </select>
        </div>

        <!-- University Type -->
        <div class="filter-section">
            <h3 class="filter-title">University Type</h3>
            <div class="filter-group">
                <label class="filter-radio">
                    <input type="radio" name="typeModal" value="all" checked class="auto-filter">
                    <span class="custom-radio"></span>
                    <span class="filter-label">All Types</span>
                </label>
                <label class="filter-radio">
                    <input type="radio" name="typeModal" value="private" class="auto-filter">
                    <span class="custom-radio"></span>
                    <span class="filter-label">Private</span>
                    <span class="filter-count">7</span>
                </label>
                <label class="filter-radio">
                    <input type="radio" name="typeModal" value="government" class="auto-filter">
                    <span class="custom-radio"></span>
                    <span class="filter-label">Government</span>
                    <span class="filter-count">2</span>
                </label>
            </div>
        </div>

        <!-- Budget Filter -->
        <div class="filter-section">
            <h3 class="filter-title">Annual Fees</h3>
            <div class="budget-range">
                <input type="range" class="range-slider auto-filter" id="budgetRangeModal" min="0" max="500000" step="50000" value="500000">
                <div class="budget-display">
                    <span>₹0</span>
                    <span id="budgetValueModal">₹5L</span>
                    <span>₹5L+</span>
                </div>
            </div>
        </div>

        <button class="reset-filters" id="resetFiltersModal">
            <i class="fas fa-redo"></i> Reset Filters
        </button>
    </div>
</div>

<!-- Main Content -->
<div class="universities-main">
    <!-- Filter Sidebar - Desktop Only -->
    <aside class="filter-sidebar">
        <div class="resize-handle"></div>
        
        <!-- Programmes Dropdown -->
        <div class="filter-section">
            <h3 class="filter-title">Programmes</h3>
            <select class="filter-dropdown auto-filter" id="programmesFilter">
                <option value="all">All Programmes</option>
                <option value="engineering">Engineering & Technology</option>
                <option value="management">Business & Management</option>
                <option value="computer">Computer Science & IT</option>
                <option value="law">Law & Legal Studies</option>
                <option value="medical">Medical & Health Sciences</option>
                <option value="sciences">Sciences</option>
                <option value="arts">Arts & Humanities</option>
                <option value="architecture">Architecture</option>
                <option value="pharmacy">Pharmacy</option>
                <option value="design">Design</option>
                <option value="education">Education</option>
            </select>
        </div>

        <!-- State Filter -->
        <div class="filter-section">
            <h3 class="filter-title">State</h3>
            <select class="filter-dropdown auto-filter" id="stateFilter">
                <option value="all">All States</option>
                <option value="gujarat">Gujarat</option>
                <option value="maharashtra">Maharashtra</option>
                <option value="uttar pradesh">Uttar Pradesh</option>
                <option value="rajasthan">Rajasthan</option>
                <option value="delhi">Delhi</option>
                <option value="karnataka">Karnataka</option>
                <option value="tamilnadu">Tamil Nadu</option>
            </select>
        </div>

        <!-- University Type -->
        <div class="filter-section">
            <h3 class="filter-title">University Type</h3>
            <div class="filter-group">
                <label class="filter-radio">
                    <input type="radio" name="type" value="all" checked class="auto-filter">
                    <span class="custom-radio"></span>
                    <span class="filter-label">All Types</span>
                </label>
                <label class="filter-radio">
                    <input type="radio" name="type" value="private" class="auto-filter">
                    <span class="custom-radio"></span>
                    <span class="filter-label">Private</span>
                    <span class="filter-count">7</span>
                </label>
                <label class="filter-radio">
                    <input type="radio" name="type" value="government" class="auto-filter">
                    <span class="custom-radio"></span>
                    <span class="filter-label">Government</span>
                    <span class="filter-count">2</span>
                </label>
            </div>
        </div>

        <!-- Budget Filter -->
        <div class="filter-section">
            <h3 class="filter-title">Annual Fees</h3>
            <div class="budget-range">
                <input type="range" class="range-slider auto-filter" id="budgetRange" min="0" max="500000" step="50000" value="500000">
                <div class="budget-display">
                    <span>₹0</span>
                    <span id="budgetValue">₹5L</span>
                    <span>₹5L+</span>
                </div>
            </div>
        </div>

        <button class="reset-filters" id="resetFilters">
            <i class="fas fa-redo"></i> Reset Filters
        </button>
    </aside>

    <!-- Content Area -->
    <main class="content-area">
        <!-- Page Header with View Toggle -->
        <div class="page-header">
            <div class="page-header-left">
                <h1>UNIVERSITIES</h1>
                <p class="page-count">Showing <span id="filteredCount"><%= universities.length %></span> of <%= universities.length %> Universities</p>
            </div>
            <div class="view-toggle">
                <button class="view-btn active" id="listViewBtn">
                    <i class="fas fa-list"></i>
                    List
                </button>
                <button class="view-btn" id="gridViewBtn">
                    <i class="fas fa-th"></i>
                    Grid
                </button>
            </div>
        </div>

        <% if (universities && universities.length > 0) { %>
            <div class="universities-list" id="universitiesList">
                <% universities.forEach((university, index) => { %>
                    <div class="university-card" 
                         data-university='<%= JSON.stringify({
                             id: university._id,
                             name: university.name.toLowerCase(),
                             location: university.location.toLowerCase(),
                             state: (university.state || '').toLowerCase(),
                             type: university.type ? university.type.toLowerCase() : 'private',
                             fee: university.fee || 0,
                             programmes: university.programmes || [],
                             rating: university.rating || 4.0,
                             featured: university.featured || false
                         }) %>'
                         onclick="window.location.href='/university/<%= university._id %>'">
                        
                        <% if (university.featured) { %>
                            <div class="featured-badge">FEATURED</div>
                        <% } %>
                        
                        <!-- List View Content - Desktop Only -->
                        <div class="university-left">
                            <h3 class="university-name"><%= university.name %></h3>
                            
                            <div class="university-details-left">
                                <div class="detail-row">
                                    <i class="fas fa-map-marker-alt"></i>
                                    <span>Location</span>
                                    <span style="margin-left: auto; font-weight: 500;"><%= university.location %>, <%= university.state || 'Gujarat' %></span>
                                </div>
                                
                                <div class="detail-row">
                                    <i class="fas fa-university"></i>
                                    <span>Type</span>
                                    <span style="margin-left: auto; font-weight: 500;"><%= university.type || 'Private' %></span>
                                </div>
                                
                                <div class="detail-row">
                                    <i class="fas fa-graduation-cap"></i>
                                    <span>Programmes</span>
                                    <span style="margin-left: auto; font-weight: 500; text-align: right;"><%= university.programmes.slice(0, 3).join(', ') %><% if (university.programmes.length > 3) { %> +<%= university.programmes.length - 3 %> more<% } %></span>
                                </div>
                            </div>
                            
                            <a href="/university/<%= university._id %>" class="visit-button" onclick="event.stopPropagation()">
                                <i class="fas fa-external-link-alt"></i> Visit University Page
                            </a>
                        </div>
                        
                        <div class="university-right">
                            <div class="stat-item">
                                <i class="fas fa-globe-asia stat-icon"></i>
                                <div class="stat-content">
                                    <div class="stat-label">Global Ranking</div>
                                    <div class="stat-value">#<%= university.globalRanking || Math.floor(Math.random() * 200) + 1 %></div>
                                </div>
                            </div>
                            
                            <div class="stat-item">
                                <i class="fas fa-star stat-icon"></i>
                                <div class="stat-content">
                                    <div class="stat-label">Rating</div>
                                    <div class="stat-value"><%= university.rating || 4.4 %>/5</div>
                                </div>
                            </div>
                            
                            <div class="stat-item">
                                <i class="fas fa-graduation-cap stat-icon"></i>
                                <div class="stat-content">
                                    <div class="stat-label">Masters Programs</div>
                                    <div class="stat-value"><%= university.mastersPrograms || 40 %></div>
                                </div>
                            </div>
                            
                            <div class="stat-item">
                                <i class="fas fa-rupee-sign stat-icon"></i>
                                <div class="stat-content">
                                    <div class="stat-label">Annual Fees</div>
                                    <div class="stat-value">
                                        <% if (university.fee) { %>
                                            ₹<%= (university.fee/100000).toFixed(1) %>L
                                        <% } else { %>
                                            ₹3.3L
                                        <% } %>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Grid View Content - Desktop Grid & Mobile (Both List and Grid) -->
                        <h3 class="university-name grid-title"><%= university.name %></h3>
                        
                        <div class="university-location">
                            <i class="fas fa-map-marker-alt"></i>
                            <%= university.location %>, <%= university.state || 'Gujarat' %>
                        </div>
                        
                        <div class="university-programmes">
                            <i class="fas fa-graduation-cap"></i>
                            <%= university.programmes.slice(0, 2).join(', ') %> +<%= Math.max(0, university.programmes.length - 2) %> more
                        </div>
                        
                        <div class="grid-stats">
                            <div class="grid-stat-item">
                                <i class="fas fa-globe-asia grid-stat-icon"></i>
                                <div class="grid-stat-label">GLOBAL RANK</div>
                                <div class="grid-stat-value">#<%= university.globalRanking || 85 %></div>
                            </div>
                            
                            <div class="grid-stat-item">
                                <i class="fas fa-star grid-stat-icon"></i>
                                <div class="grid-stat-label">RATING</div>
                                <div class="grid-stat-value"><%= university.rating || 4.3 %></div>
                            </div>
                            
                            <div class="grid-stat-item">
                                <i class="fas fa-users grid-stat-icon"></i>
                                <div class="grid-stat-label">STUDENTS</div>
                                <div class="grid-stat-value"><%= university.students || '5200+' %></div>
                            </div>
                        </div>
                    </div>
                <% }) %>
            </div>
            
            <!-- No Results Message - Hidden by Default -->
            <div class="no-results" id="noResults">
                <i class="fas fa-university"></i>
                <h3>No Universities Found</h3>
                <p>Try adjusting your search criteria or filters to find more universities.</p>
                <button class="reset-filters" onclick="resetAllFilters()">
                    <i class="fas fa-redo"></i> Reset Filters
                </button>
            </div>
        <% } else { %>
            <div class="no-results show">
                <i class="fas fa-university"></i>
                <h3>No Universities Found</h3>
                <p>Try adjusting your search criteria or filters to find more universities.</p>
                <button class="reset-filters" onclick="resetAllFilters()">
                    <i class="fas fa-redo"></i> Reset Filters
                </button>
            </div>
        <% } %>
    </main>
</div>

<!-- CTA Section -->
<section class="cta-section">
    <div class="cta-content">
        <h2>Need Help Choosing?</h2>
        <p>Get personalized guidance from our expert counsellors to find the best university for you</p>
        <div class="cta-buttons">
            <a href="/contact" class="cta-btn-primary">
                <i class="fas fa-envelope"></i> Contact Admissions
            </a>
            <a href="tel:+9118001234567" class="cta-btn-secondary">
                <i class="fas fa-phone"></i> Talk to Counsellor
            </a>
        </div>
    </div>
</section>

<script>
    // Mobile Filter Modal
    const mobileFilterBtn = document.getElementById('mobileFilterBtn');
    const filterModal = document.getElementById('filterModal');
    const filterModalOverlay = document.getElementById('filterModalOverlay');
    const closeFilterModal = document.getElementById('closeFilterModal');

    // Open filter modal
    mobileFilterBtn.addEventListener('click', function() {
        filterModal.classList.add('active');
        filterModalOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
    });

    // Close filter modal
    function closeModal() {
        filterModal.classList.remove('active');
        filterModalOverlay.classList.remove('active');
        document.body.style.overflow = '';
    }

    closeFilterModal.addEventListener('click', closeModal);
    filterModalOverlay.addEventListener('click', closeModal);

    // Sync modal filters with main filters
    function syncModalToMain() {
        document.getElementById('programmesFilter').value = document.getElementById('programmesFilterModal').value;
        document.getElementById('stateFilter').value = document.getElementById('stateFilterModal').value;
        document.getElementById('budgetRange').value = document.getElementById('budgetRangeModal').value;
        
        const typeModal = document.querySelector('input[name="typeModal"]:checked').value;
        document.querySelector(`input[name="type"][value="${typeModal}"]`).checked = true;
        
        filterUniversities();
    }

    // Add event listeners to modal filters
    document.querySelectorAll('#filterModal .auto-filter').forEach(element => {
        element.addEventListener('change', syncModalToMain);
    });

    // Budget range modal
    const budgetRangeModal = document.getElementById('budgetRangeModal');
    const budgetValueModal = document.getElementById('budgetValueModal');
    
    budgetRangeModal.addEventListener('input', function() {
        const value = parseInt(this.value);
        budgetValueModal.textContent = value >= 100000 ? '₹' + (value/100000).toFixed(1) + 'L' : '₹' + value.toLocaleString();
        syncModalToMain();
    });

    // Reset modal filters
    document.getElementById('resetFiltersModal').addEventListener('click', function() {
        document.getElementById('programmesFilterModal').value = 'all';
        document.getElementById('stateFilterModal').value = 'all';
        budgetRangeModal.value = 500000;
        budgetValueModal.textContent = '₹5L';
        document.querySelector('input[name="typeModal"][value="all"]').checked = true;
        resetAllFilters();
        closeModal();
    });

    // View Toggle Functionality
    const listViewBtn = document.getElementById('listViewBtn');
    const gridViewBtn = document.getElementById('gridViewBtn');
    const universitiesList = document.getElementById('universitiesList');
    const noResults = document.getElementById('noResults');

    listViewBtn.addEventListener('click', function() {
        if (universitiesList) {
            universitiesList.classList.remove('universities-grid');
            universitiesList.classList.add('universities-list');
            listViewBtn.classList.add('active');
            gridViewBtn.classList.remove('active');
        }
    });

    gridViewBtn.addEventListener('click', function() {
        if (universitiesList) {
            universitiesList.classList.remove('universities-list');
            universitiesList.classList.add('universities-grid');
            gridViewBtn.classList.add('active');
            listViewBtn.classList.remove('active');
        }
    });

    // Search functionality
    document.getElementById('searchInput').addEventListener('input', filterUniversities);
    document.getElementById('universitySearchForm').addEventListener('submit', function(e) {
        e.preventDefault();
        filterUniversities();
    });

    // Auto-filter functionality
    document.querySelectorAll('.auto-filter').forEach(element => {
        element.addEventListener('change', filterUniversities);
    });

    // Budget range
    const budgetRange = document.getElementById('budgetRange');
    const budgetValue = document.getElementById('budgetValue');
    
    budgetRange.addEventListener('input', function() {
        const value = parseInt(this.value);
        budgetValue.textContent = value >= 100000 ? '₹' + (value/100000).toFixed(1) + 'L' : '₹' + value.toLocaleString();
        filterUniversities();
    });

    // Reset all filters
    document.getElementById('resetFilters').addEventListener('click', resetAllFilters);

    // Filter universities function
    function filterUniversities() {
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        const stateFilter = document.getElementById('stateFilter').value;
        const programmesFilter = document.getElementById('programmesFilter').value;
        const budgetValue = parseInt(budgetRange.value);
        const selectedType = document.querySelector('input[name="type"]:checked').value;
        
        const universityCards = document.querySelectorAll('.university-card');
        let visibleCount = 0;
        
        universityCards.forEach(card => {
            const universityData = JSON.parse(card.getAttribute('data-university'));
            let visible = true;
            
            // Search filter
            if (searchTerm) {
                const nameMatch = universityData.name.includes(searchTerm);
                const locationMatch = universityData.location.includes(searchTerm);
                const stateMatch = universityData.state && universityData.state.includes(searchTerm);
                
                if (!nameMatch && !locationMatch && !stateMatch) {
                    visible = false;
                }
            }
            
            // State filter
            if (stateFilter !== 'all' && universityData.state !== stateFilter) {
                visible = false;
            }
            
            // Programmes filter
            if (programmesFilter !== 'all') {
                const hasProgramme = universityData.programmes.some(p => 
                    p.toLowerCase().includes(programmesFilter)
                );
                if (!hasProgramme) visible = false;
            }
            
            // Type filter
            if (selectedType !== 'all' && universityData.type !== selectedType) {
                visible = false;
            }
            
            // Budget filter
            if (budgetValue < 500000 && universityData.fee > budgetValue) {
                visible = false;
            }
            
            // Apply visibility
            if (visible) {
                card.classList.remove('filtered-out');
                visibleCount++;
            } else {
                card.classList.add('filtered-out');
            }
        });
        
        // Update count
        document.getElementById('filteredCount').textContent = visibleCount;
        
        // Show/hide no results message
        if (noResults) {
            if (visibleCount === 0) {
                noResults.classList.add('show');
                if (universitiesList) {
                    universitiesList.style.display = 'none';
                }
            } else {
                noResults.classList.remove('show');
                if (universitiesList) {
                    universitiesList.style.display = '';
                }
            }
        }
    }

    function resetAllFilters() {
        document.getElementById('searchInput').value = '';
        document.getElementById('stateFilter').value = 'all';
        document.getElementById('programmesFilter').value = 'all';
        budgetRange.value = 500000;
        budgetValue.textContent = '₹5L';
        document.querySelector('input[name="type"][value="all"]').checked = true;
        
        // Reset modal filters
        document.getElementById('stateFilterModal').value = 'all';
        document.getElementById('programmesFilterModal').value = 'all';
        budgetRangeModal.value = 500000;
        budgetValueModal.textContent = '₹5L';
        document.querySelector('input[name="typeModal"][value="all"]').checked = true;
        
        // Remove filtered-out class from all cards
        document.querySelectorAll('.university-card').forEach(card => {
            card.classList.remove('filtered-out');
        });
        
        // Show universities list and hide no results
        if (universitiesList) {
            universitiesList.style.display = '';
        }
        if (noResults) {
            noResults.classList.remove('show');
        }
        
        // Update count
        const totalCards = document.querySelectorAll('.university-card').length;
        document.getElementById('filteredCount').textContent = totalCards;
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
        // Add CSS for filtered-out class
        const style = document.createElement('style');
        style.textContent = `
            .university-card.filtered-out {
                display: none !important;
            }
            
            @media (max-width: 768px) {
                .universities-list .university-card.filtered-out,
                .universities-grid .university-card.filtered-out {
                    display: none !important;
                }
            }
        `;
        document.head.appendChild(style);
        
        budgetRange.value = 500000;
        budgetValue.textContent = '₹5L';
        budgetRangeModal.value = 500000;
        budgetValueModal.textContent = '₹5L';
        
        // Initialize filter count
        const totalCards = document.querySelectorAll('.university-card').length;
        document.getElementById('filteredCount').textContent = totalCards;
    });

    // Force filter on page load
    window.addEventListener('load', function() {
        setTimeout(filterUniversities, 100);
    });
</script>

<%- include('partials/footer') %>
