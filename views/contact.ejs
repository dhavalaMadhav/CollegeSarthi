<%- include('partials/header') %>

<style>
    /* ========================================
       CONTACT PAGE - SWISS DESIGN SYSTEM
       CAROUSEL-STYLE LEFT SECTION
    ======================================== */
    
    /* Reduced black intensity variables - FOR BORDERS AND SHADOWS ONLY */
    .contact-hero,
    .contact-page-container,
    .contact-info-section,
    .contact-form-section {
        --black-light: #333333; /* Only for borders */
        --shadow-color: rgba(0, 0, 0, 0.15); /* Only for shadows */
        --shadow-color-dark: rgba(0, 0, 0, 0.2); /* Only for darker shadows */
    }

    /* Contact Hero - Match Swiss Design */
    .contact-hero {
        height: 300px;
        background: linear-gradient(135deg, #8B5CF6 0%, #6D28D9 100%); /* Purple gradient */
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
        color: var(--white);
        padding: 120px 30px 40px;
        border-bottom: 2px solid var(--black-light);
        position: relative;
        overflow: hidden;
    }

    .contact-hero-content {
        max-width: 800px;
        position: relative;
        z-index: 2;
    }

    .contact-hero h1 {
        font-size: 3rem;
        font-weight: var(--font-weight-black);
        margin-bottom: 20px;
        line-height: 1.1;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        position: relative;
        display: inline-block;
        padding-bottom: 40px;
    }

    .contact-hero h1::after {
        content: '';
        position: absolute;
        width: 100%;
        height: 2px;
        background: var(--white);
        bottom: 15px;
        left: 0;
        z-index: 1;
    }

    .contact-hero h1::before {
        content: '';
        position: absolute;
        width: 28px;
        height: 28px;
        background: var(--white);
        border: 3px solid var(--white);
        border-radius: 50%;
        bottom: -2px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 2;
        box-shadow: 0 0 0 8px rgba(255, 255, 255, 0.2);
    }

    .contact-hero p {
        font-size: 1.25rem;
        line-height: 1.6;
        max-width: 600px;
        margin: 0 auto;
        font-weight: var(--font-weight-medium);
        opacity: 0.9;
    }

    /* Grid Overlay for Hero */
    .contact-hero-grid {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
        gap: 2px;
        padding: 2px;
        background-color: rgba(0, 0, 0, 0.3);
        z-index: 1;
        opacity: 0.7;
    }

    .contact-hero-grid-cell {
        background-color: rgba(255, 255, 255, 0.2);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: var(--font-weight-bold);
        color: var(--white);
        transition: all 0.3s ease;
    }

    /* Contact Page Container */
    .contact-page-container {
        width: 90%;
        max-width: 1400px;
        margin: 60px auto 120px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 0;
        border: 2px solid var(--black-light);
        box-shadow: 0 4px 12px var(--shadow-color);
        background: var(--white);
        padding: 0;
    }

    /* ========================================
       LEFT SECTION - EXACT CAROUSEL SLIDE DESIGN (Slide 1 Style)
    ======================================== */
    .contact-info-section {
        padding: 0;
        color: var(--white);
        border-right: 2px solid var(--black-light);
        position: relative;
        overflow: hidden;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
    }

    /* Grid Overlay - Same as carousel */
    .contact-grid-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        grid-template-rows: repeat(4, 1fr);
        gap: 2px;
        padding: 2px;
        background-color: var(--black-light);
        opacity: 0.3;
        z-index: 1;
    }

    /* Grid Cells with Different Colors - Exact same as carousel slide 1 */
    .contact-grid-cell {
        background-color: var(--white);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: var(--font-weight-bold);
        color: var(--black);
        transition: all 0.3s ease;
    }

    /* Specific colored cells - matching carousel pattern */
    .contact-grid-cell.accent {
        background-color: var(--secondary);
        color: var(--white);
    }

    .contact-grid-cell.primary {
        background-color: var(--primary);
        color: var(--white);
    }

    .contact-grid-cell.green {
        background-color: var(--accent);
        color: var(--black);
    }

    /* Stripe Pattern - Same as carousel */
    .contact-info-section::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(255, 255, 255, 0.1) 2px,
            rgba(255, 255, 255, 0.1) 4px
        );
        pointer-events: none;
        z-index: 1;
    }

    /* Content Wrapper */
    .contact-info-content {
        position: relative;
        z-index: 2;
        padding: 60px;
        height: 100%;
    }

    .contact-info-content h2 {
        font-size: 2.5rem;
        font-weight: var(--font-weight-black);
        margin-bottom: 30px;
        line-height: 1.2;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--white);
    }

    .contact-info-content > p {
        font-size: 1.125rem;
        margin-bottom: 40px;
        opacity: 0.9;
        line-height: 1.7;
        color: rgba(255, 255, 255, 0.95);
    }

    /* Contact Methods - Swiss Cards */
    .contact-methods {
        display: flex;
        flex-direction: column;
        gap: 20px;
        margin-top: 40px;
        position: relative;
        z-index: 2;
    }

    .contact-method {
        display: flex;
        align-items: center;
        gap: 20px;
        padding: 30px;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.2);
        transition: all 0.2s ease;
        position: relative;
        backdrop-filter: blur(5px);
    }

    .contact-method:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translate(-2px, -2px);
    }

    .contact-method i {
        font-size: 32px;
        width: 60px;
        height: 60px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: var(--white);
        color: var(--primary);
        border: 2px solid var(--black-light);
        box-shadow: 3px 3px 0px 0px rgba(0, 0, 0, 0.15);
        flex-shrink: 0;
    }

    .contact-method-content h3 {
        font-size: 0.875rem;
        font-weight: var(--font-weight-semibold);
        color: rgba(255, 255, 255, 0.9);
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }

    .contact-method-content a {
        color: var(--white);
        text-decoration: none;
        font-size: 1.25rem;
        font-weight: var(--font-weight-bold);
        transition: color 0.2s ease;
        display: block;
        margin-top: 5px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .contact-method-content a:hover {
        color: var(--accent);
    }

    /* ========================================
       RIGHT SECTION - CONTACT FORM (Swiss Design)
    ======================================== */
    .contact-form-section {
        padding: 60px;
        background: var(--white);
    }

    .contact-form-section h2 {
        font-size: 2rem;
        font-weight: var(--font-weight-black);
        color: var(--black); /* CHANGED BACK TO BLACK */
        margin-bottom: 15px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .contact-form-section .subtitle {
        font-size: 1.125rem;
        color: var(--gray-700);
        margin-bottom: 40px;
        line-height: 1.6;
    }

    /* Form Elements - Swiss Style */
    .form-group {
        margin-bottom: 30px;
    }

    .form-group label {
        display: block;
        font-size: 0.875rem;
        font-weight: var(--font-weight-semibold);
        color: var(--black); /* CHANGED BACK TO BLACK */
        margin-bottom: 10px;
        text-transform: uppercase;
        letter-spacing: 0.1em;
    }

    .form-group label .required {
        color: var(--secondary);
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 18px 20px;
        font-size: 1rem;
        font-family: var(--font-main);
        border: 2px solid var(--black-light);
        background: var(--white);
        color: var(--black); /* CHANGED BACK TO BLACK */
        transition: all 0.2s ease;
        box-shadow: none;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: none;
        transform: none;
    }

    .form-group textarea {
        resize: vertical;
        min-height: 140px;
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    /* Checkbox Group */
    .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 10px;
    }

    .checkbox-item {
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 15px;
        background: var(--gray-100);
        border: 2px solid var(--gray-300);
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: none;
    }

    .checkbox-item:hover {
        border-color: var(--primary);
        background: rgba(0, 85, 255, 0.05);
    }

    .checkbox-item input[type="checkbox"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
        accent-color: var(--primary);
    }

    .checkbox-item label {
        margin: 0;
        font-weight: var(--font-weight-medium);
        color: var(--gray-900);
        cursor: pointer;
        text-transform: none;
        letter-spacing: normal;
    }

    /* Submit Button - Swiss Style */
    .submit-btn {
        width: 100%;
        padding: 20px 40px;
        background: var(--accent);
        color: var(--black); /* CHANGED BACK TO BLACK */
        border: 2px solid var(--black-light);
        font-size: 1rem;
        font-weight: var(--font-weight-semibold);
        font-family: var(--font-main);
        cursor: pointer;
        transition: all 0.2s ease;
        box-shadow: 0 4px 0px 0px rgba(0, 0, 0, 0.15);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-top: 10px;
        position: relative;
    }

    .submit-btn:hover {
        background: var(--accent-dark);
        transform: translate(-2px, -2px);
        box-shadow: 0 6px 0px 0px rgba(0, 0, 0, 0.15);
    }

    .submit-btn:disabled {
        background: var(--gray-200);
        color: var(--gray-500);
        cursor: not-allowed;
        border-color: var(--gray-300);
        box-shadow: none;
        transform: none !important;
    }

    .submit-btn i {
        margin-right: 10px;
    }

    /* Messages */
    .success-message,
    .error-message {
        padding: 25px 30px;
        margin-bottom: 30px;
        border: 2px solid var(--black-light);
        display: none;
        font-weight: var(--font-weight-semibold);
        position: relative;
        box-shadow: 0 2px 4px var(--shadow-color);
    }

    .success-message {
        background: var(--accent);
        color: var(--black); /* CHANGED BACK TO BLACK */
        border-color: var(--accent-dark);
    }

    .error-message {
        background: var(--secondary);
        color: var(--white);
        border-color: var(--secondary-dark);
    }

    .success-message.show,
    .error-message.show {
        display: block;
        animation: swissSlideIn 0.3s ease;
    }

    .success-message i,
    .error-message i {
        margin-right: 10px;
    }

    /* ========================================
       RESPONSIVE DESIGN
    ======================================== */
    @media (max-width: 1024px) {
        .contact-page-container {
            grid-template-columns: 1fr;
        }
        
        .contact-info-section {
            border-right: none;
            border-bottom: 2px solid var(--black-light);
        }
        
        .contact-hero h1 {
            font-size: 2.5rem;
        }
        
        .contact-hero p {
            font-size: 1.125rem;
        }
    }

    @media (max-width: 768px) {
        .contact-hero {
            height: 250px;
            padding: 100px 20px 30px;
        }
        
        .contact-hero h1 {
            font-size: 2rem;
            padding-bottom: 30px;
            margin-bottom: 15px;
        }
        
        .contact-page-container {
            width: 95%;
            margin: 40px auto 80px;
            box-shadow: 0 3px 8px var(--shadow-color);
        }
        
        .contact-info-content,
        .contact-form-section {
            padding: 40px;
        }
        
        .contact-info-content h2,
        .contact-form-section h2 {
            font-size: 1.75rem;
        }
        
        .form-row {
            grid-template-columns: 1fr;
        }
        
        .contact-method {
            padding: 20px;
        }
        
        .contact-method i {
            width: 50px;
            height: 50px;
            font-size: 24px;
            box-shadow: 2px 2px 0px 0px rgba(0, 0, 0, 0.12);
        }
    }

    @media (max-width: 600px) {
        .contact-hero {
            height: 220px;
        }
        
        .contact-hero h1 {
            font-size: 1.75rem;
        }
        
        .contact-hero h1::after,
        .contact-hero h1::before {
            display: none;
        }
        
        .contact-info-content,
        .contact-form-section {
            padding: 30px 20px;
        }
        
        .checkbox-group {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .checkbox-item {
            width: 100%;
        }
        
        .contact-page-container {
            box-shadow: 0 2px 4px var(--shadow-color);
        }
    }

    @media (max-width: 400px) {
        .contact-hero h1 {
            font-size: 1.5rem;
        }
        
        .contact-page-container {
            width: 98%;
            margin: 30px auto 60px;
            box-shadow: 0 2px 4px var(--shadow-color);
        }
    }
</style>

<!-- Hero Section -->
<section class="contact-hero">
    <div class="contact-hero-grid">
        <% for(let i=0; i<16; i++) { %>
            <div class="contact-hero-grid-cell"></div>
        <% } %>
    </div>
    
    <div class="contact-hero-content">
        <h1>Get in Touch</h1>
        <p>Have questions about university admissions? Our expert counsellors are here to guide you through every step of your educational journey.</p>
    </div>
</section>

<!-- Contact Page Container -->
<div class="contact-page-container">
    <!-- Left: Contact Info with Carousel Slide Design -->
    <div class="contact-info-section">
        <!-- Grid Overlay with Colored Cells - Exactly like carousel slide 1 -->
        <div class="contact-grid-overlay">
            <% 
            // Create 16 grid cells with the same color pattern as carousel slide 1
            const gridColors = [
                'white', 'white', 'accent', 'white',
                'primary', 'accent', 'white', 'accent',
                'white', 'primary', 'accent', 'white',
                'white', 'primary', 'white', 'green'
            ];
            
            gridColors.forEach((color, index) => { 
            %>
                <div class="contact-grid-cell <%= color %>"></div>
            <% }); %>
        </div>
        
        <!-- Content -->
        <div class="contact-info-content">
            <h2>Contact Information</h2>
            <p>Reach out to us through any of these channels. We're here to help you achieve your academic goals.</p>

            <div class="contact-methods">
                <div class="contact-method">
                    <i class="fas fa-phone"></i>
                    <div class="contact-method-content">
                        <h3>Call Us</h3>
                        <a href="tel:<%= process.env.CA_PHONE %>"><%= process.env.CA_PHONE %></a>
                    </div>
                </div>

                <div class="contact-method">
                    <i class="fab fa-whatsapp"></i>
                    <div class="contact-method-content">
                        <h3>WhatsApp</h3>
                        <a href="https://wa.me/<%= process.env.CA_WHATSAPP %>" target="_blank">Chat with us</a>
                    </div>
                </div>

                <div class="contact-method">
                    <i class="fas fa-envelope"></i>
                    <div class="contact-method-content">
                        <h3>Email</h3>
                        <a href="mailto:<%= process.env.CA_EMAIL %>"><%= process.env.CA_EMAIL %></a>
                    </div>
                </div>

                <div class="contact-method">
                    <i class="fas fa-clock"></i>
                    <div class="contact-method-content">
                        <h3>Office Hours</h3>
                        <span style="font-size: 1.25rem; font-weight: var(--font-weight-bold); color: var(--white); display: block; margin-top: 5px; text-transform: uppercase; letter-spacing: 0.05em;">
                            Mon - Sat: 9:00 AM - 7:00 PM
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right: Contact Form -->
    <div class="contact-form-section">
        <h2>Send Us a Message</h2>
        <p class="subtitle">Fill out the form below and we'll get back to you within 24 hours.</p>

        <div class="success-message" id="successMessage">
            <i class="fas fa-check-circle"></i> Thank you! Your message has been sent. We'll contact you soon.
        </div>
        <div class="error-message" id="errorMessage">
            <i class="fas fa-exclamation-circle"></i> Something went wrong. Please try again.
        </div>

        <form id="contactForm">
            <div class="form-row">
                <div class="form-group">
                    <label>Your Name <span class="required">*</span></label>
                    <input type="text" name="name" placeholder="Enter your full name" required>
                </div>

                <div class="form-group">
                    <label>Phone Number <span class="required">*</span></label>
                    <input type="tel" name="phone" placeholder="+91 9876543210" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Email Address <span class="required">*</span></label>
                    <input type="email" name="email" placeholder="your.email@example.com" required>
                </div>

                <div class="form-group">
                    <label>City</label>
                    <input type="text" name="city" placeholder="Your city">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Interested Stream <span class="required">*</span></label>
                    <select name="interestedStream" required>
                        <option value="">Select Stream</option>
                        <option value="Engineering">Engineering</option>
                        <option value="Medical">Medical</option>
                        <option value="Commerce">Commerce</option>
                        <option value="Arts">Arts & Humanities</option>
                        <option value="Science">Science</option>
                        <option value="Law">Law</option>
                        <option value="Management">Management</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Current Education</label>
                    <select name="currentEducation">
                        <option value="">Select</option>
                        <option value="10th">10th Grade</option>
                        <option value="12th">12th Grade</option>
                        <option value="Graduate">Graduate</option>
                        <option value="Postgraduate">Postgraduate</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Budget Range</label>
                    <select name="budgetRange">
                        <option value="">Select Budget</option>
                        <option value="Under 2 Lakhs">Under ₹2 Lakhs/year</option>
                        <option value="2-5 Lakhs">₹2-5 Lakhs/year</option>
                        <option value="5-10 Lakhs">₹5-10 Lakhs/year</option>
                        <option value="10-20 Lakhs">₹10-20 Lakhs/year</option>
                        <option value="Above 20 Lakhs">Above ₹20 Lakhs/year</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Target Year</label>
                    <select name="targetYear">
                        <option value="">Select Year</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>Interested Universities (Select all that apply)</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="IIT" id="iit">
                        <label for="iit">IIT</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="NIT" id="nit">
                        <label for="nit">NIT</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="BITS" id="bits">
                        <label for="bits">BITS Pilani</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="VIT" id="vit">
                        <label for="vit">VIT</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="SRM" id="srm">
                        <label for="srm">SRM</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="Manipal" id="manipal">
                        <label for="manipal">Manipal</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="Other" id="other">
                        <label for="other">Other</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Course Interested In</label>
                <input type="text" name="courseInterested" placeholder="e.g., B.Tech Computer Science, MBBS, BBA">
            </div>

            <div class="form-group">
                <label>Your Message</label>
                <textarea name="message" placeholder="Tell us about your goals and any specific questions you have..."></textarea>
            </div>

            <button type="submit" class="submit-btn" id="submitBtn">
                <i class="fas fa-paper-plane"></i>
                Send Message
            </button>
        </form>
    </div>
</div>

<script>
document.getElementById('contactForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const submitBtn = document.getElementById('submitBtn');
    const successMsg = document.getElementById('successMessage');
    const errorMsg = document.getElementById('errorMessage');
    
    // Hide previous messages
    successMsg.classList.remove('show');
    errorMsg.classList.remove('show');
    
    // Disable button
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
    submitBtn.style.boxShadow = 'none';
    submitBtn.style.transform = 'none';
    
    // Get form data
    const formData = new FormData(this);
    
    // Get checked universities
    const universities = [];
    document.querySelectorAll('input[name="interestedUniversities"]:checked').forEach(cb => {
        universities.push(cb.value);
    });
    
    // Build data object
    const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        phone: formData.get('phone'),
        city: formData.get('city'),
        interestedStream: formData.get('interestedStream'),
        interestedUniversities: universities,
        currentEducation: formData.get('currentEducation'),
        budgetRange: formData.get('budgetRange'),
        targetYear: formData.get('targetYear'),
        courseInterested: formData.get('courseInterested'),
        message: formData.get('message')
    };
    
    try {
        const response = await fetch('/api/leads/contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
            successMsg.classList.add('show');
            successMsg.innerHTML = '<i class="fas fa-check-circle"></i> ' + result.message;
            this.reset();
            
            // Scroll to message
            successMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
            errorMsg.classList.add('show');
            errorMsg.innerHTML = '<i class="fas fa-exclamation-circle"></i> ' + result.message;
            errorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    } catch (error) {
        console.error('Error:', error);
        errorMsg.classList.add('show');
        errorMsg.innerHTML = '<i class="fas fa-exclamation-circle"></i> Network error. Please try again.';
        errorMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
    } finally {
        // Re-enable button
        setTimeout(() => {
            submitBtn.disabled = false;
            submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Message';
            submitBtn.style.boxShadow = 'var(--shadow-accent)';
            submitBtn.style.transform = 'none';
        }, 500);
    }
});
</script>

<%- include('partials/footer') %>