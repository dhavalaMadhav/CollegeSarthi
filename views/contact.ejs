<%- include('partials/header') %>

<style>
    /* Contact Page Styling */
    .contact-page-container {
        width: 90%;
        max-width: 1400px;
        margin: 120px auto 60px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 60px;
    }

    .contact-info-section {
        padding: 60px;
        background: linear-gradient(135deg, #2c5282 0%, #1a365d 100%);
        color: white;
        border-radius: 0;
        box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.1);
        border: 2px solid #000;
    }

    .contact-info-section h1 {
        font-size: 48px;
        margin-bottom: 20px;
        font-weight: 800;
    }

    .contact-info-section p {
        font-size: 20px;
        margin-bottom: 40px;
        opacity: 0.95;
        line-height: 1.6;
    }

    .contact-methods {
        display: flex;
        flex-direction: column;
        gap: 30px;
        margin-top: 50px;
    }

    .contact-method {
        display: flex;
        align-items: center;
        gap: 20px;
        padding: 25px;
        background: rgba(255, 255, 255, 0.1);
        border-left: 4px solid #fff;
        transition: all 0.3s;
    }

    .contact-method:hover {
        background: rgba(255, 255, 255, 0.2);
        transform: translateX(10px);
    }

    .contact-method i {
        font-size: 32px;
    }

    .contact-method-content h3 {
        font-size: 18px;
        margin-bottom: 8px;
        font-weight: 600;
        opacity: 0.9;
    }

    .contact-method-content a {
        color: white;
        text-decoration: none;
        font-size: 20px;
        font-weight: 700;
    }

    .contact-form-section {
        background: white;
        padding: 60px;
        box-shadow: 8px 8px 0 rgba(0, 0, 0, 0.08);
        border: 2px solid #000;
    }

    .contact-form-section h2 {
        font-size: 36px;
        color: #1a365d;
        margin-bottom: 15px;
        font-weight: 800;
    }

    .contact-form-section .subtitle {
        font-size: 18px;
        color: #666;
        margin-bottom: 40px;
    }

    .form-group {
        margin-bottom: 25px;
    }

    .form-group label {
        display: block;
        font-size: 16px;
        font-weight: 700;
        color: #1a365d;
        margin-bottom: 10px;
    }

    .form-group label .required {
        color: #EA4335;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
        width: 100%;
        padding: 18px 20px;
        font-size: 16px;
        border: 2px solid #e0e0e0;
        transition: all 0.3s;
        font-family: inherit;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: #2c5282;
        box-shadow: 4px 4px 0 rgba(44, 82, 130, 0.1);
    }

    .form-group textarea {
        resize: vertical;
        min-height: 120px;
    }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    .checkbox-group {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-top: 10px;
    }

    .checkbox-item {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .checkbox-item input[type="checkbox"] {
        width: 20px;
        height: 20px;
        cursor: pointer;
    }

    .checkbox-item label {
        margin: 0;
        font-weight: 600;
        cursor: pointer;
    }

    .submit-btn {
        width: 100%;
        padding: 20px;
        background: #2c5282;
        color: white;
        border: 3px solid #1a365d;
        font-size: 20px;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 6px 6px 0 #1a365d;
        margin-top: 30px;
    }

    .submit-btn:hover {
        background: #1a365d;
        transform: translate(-3px, -3px);
        box-shadow: 9px 9px 0 #0d1f3a;
    }

    .submit-btn:disabled {
        background: #ccc;
        cursor: not-allowed;
        border-color: #999;
        box-shadow: none;
    }

    .submit-btn i {
        margin-right: 10px;
    }

    .success-message,
    .error-message {
        padding: 20px;
        margin-bottom: 25px;
        border-left: 4px solid;
        display: none;
        font-weight: 600;
    }

    .success-message {
        background: #d4edda;
        border-color: #28a745;
        color: #155724;
    }

    .error-message {
        background: #f8d7da;
        border-color: #dc3545;
        color: #721c24;
    }

    .success-message.show,
    .error-message.show {
        display: block;
    }

    /* Responsive */
    @media (max-width: 1024px) {
        .contact-page-container {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 768px) {
        .contact-page-container {
            width: 95%;
            margin-top: 100px;
        }

        .contact-info-section,
        .contact-form-section {
            padding: 40px 30px;
        }

        .contact-info-section h1 {
            font-size: 36px;
        }

        .form-row {
            grid-template-columns: 1fr;
        }
    }
</style>

<div class="contact-page-container">
    <!-- Left: Contact Info -->
    <div class="contact-info-section">
        <h1>Get in Touch</h1>
        <p>Have questions about university admissions? Our expert counsellors are here to guide you through every step of your educational journey.</p>

        <div class="contact-methods">
            <div class="contact-method">
                <i class="fas fa-phone"></i>
                <div class="contact-method-content">
                    <h3>Call Us</h3>
                    <a href="tel:<%= process.env.CA_PHONE %>"><%= process.env.CA_PHONE %></a>
                </div>
            </div>

            <div class="contact-method">
                <i class="fab fa-whatsapp"></i>
                <div class="contact-method-content">
                    <h3>WhatsApp</h3>
                    <a href="https://wa.me/<%= process.env.CA_WHATSAPP %>" target="_blank">Chat with us</a>
                </div>
            </div>

            <div class="contact-method">
                <i class="fas fa-envelope"></i>
                <div class="contact-method-content">
                    <h3>Email</h3>
                    <a href="mailto:<%= process.env.CA_EMAIL %>"><%= process.env.CA_EMAIL %></a>
                </div>
            </div>

            <div class="contact-method">
                <i class="fas fa-clock"></i>
                <div class="contact-method-content">
                    <h3>Office Hours</h3>
                    <a style="cursor: default;">Mon - Sat: 9:00 AM - 7:00 PM</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Right: Contact Form -->
    <div class="contact-form-section">
        <h2>Send Us a Message</h2>
        <p class="subtitle">Fill out the form below and we'll get back to you within 24 hours.</p>

        <div class="success-message" id="successMessage">
            <i class="fas fa-check-circle"></i> Thank you! We'll contact you soon.
        </div>
        <div class="error-message" id="errorMessage">
            <i class="fas fa-exclamation-circle"></i> Something went wrong. Please try again.
        </div>

        <form id="contactForm">
            <div class="form-row">
                <div class="form-group">
                    <label>Your Name <span class="required">*</span></label>
                    <input type="text" name="name" placeholder="Enter your full name" required>
                </div>

                <div class="form-group">
                    <label>Phone Number <span class="required">*</span></label>
                    <input type="tel" name="phone" placeholder="+91 9876543210" required>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Email Address <span class="required">*</span></label>
                    <input type="email" name="email" placeholder="your.email@example.com" required>
                </div>

                <div class="form-group">
                    <label>City</label>
                    <input type="text" name="city" placeholder="Your city">
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Interested Stream <span class="required">*</span></label>
                    <select name="interestedStream" required>
                        <option value="">Select Stream</option>
                        <option value="Engineering">Engineering</option>
                        <option value="Medical">Medical</option>
                        <option value="Commerce">Commerce</option>
                        <option value="Arts">Arts & Humanities</option>
                        <option value="Science">Science</option>
                        <option value="Law">Law</option>
                        <option value="Management">Management</option>
                        <option value="Other">Other</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Current Education</label>
                    <select name="currentEducation">
                        <option value="">Select</option>
                        <option value="10th">10th Grade</option>
                        <option value="12th">12th Grade</option>
                        <option value="Graduate">Graduate</option>
                        <option value="Postgraduate">Postgraduate</option>
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label>Budget Range</label>
                    <select name="budgetRange">
                        <option value="">Select Budget</option>
                        <option value="Under 2 Lakhs">Under ₹2 Lakhs/year</option>
                        <option value="2-5 Lakhs">₹2-5 Lakhs/year</option>
                        <option value="5-10 Lakhs">₹5-10 Lakhs/year</option>
                        <option value="10-20 Lakhs">₹10-20 Lakhs/year</option>
                        <option value="Above 20 Lakhs">Above ₹20 Lakhs/year</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Target Year</label>
                    <select name="targetYear">
                        <option value="">Select Year</option>
                        <option value="2025">2025</option>
                        <option value="2026">2026</option>
                        <option value="2027">2027</option>
                    </select>
                </div>
            </div>

            <div class="form-group">
                <label>Interested Universities (Select all that apply)</label>
                <div class="checkbox-group">
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="IIT" id="iit">
                        <label for="iit">IIT</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="NIT" id="nit">
                        <label for="nit">NIT</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="BITS" id="bits">
                        <label for="bits">BITS Pilani</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="VIT" id="vit">
                        <label for="vit">VIT</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="SRM" id="srm">
                        <label for="srm">SRM</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="Manipal" id="manipal">
                        <label for="manipal">Manipal</label>
                    </div>
                    <div class="checkbox-item">
                        <input type="checkbox" name="interestedUniversities" value="Other" id="other">
                        <label for="other">Other</label>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label>Course Interested In</label>
                <input type="text" name="courseInterested" placeholder="e.g., B.Tech Computer Science, MBBS, BBA">
            </div>

            <div class="form-group">
                <label>Your Message</label>
                <textarea name="message" placeholder="Tell us about your goals and any specific questions you have..."></textarea>
            </div>

            <button type="submit" class="submit-btn" id="submitBtn">
                <i class="fas fa-paper-plane"></i>
                Send Message
            </button>
        </form>
    </div>
</div>

<script>
document.getElementById('contactForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    
    const submitBtn = document.getElementById('submitBtn');
    const successMsg = document.getElementById('successMessage');
    const errorMsg = document.getElementById('errorMessage');
    
    // Hide previous messages
    successMsg.classList.remove('show');
    errorMsg.classList.remove('show');
    
    // Disable button
    submitBtn.disabled = true;
    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending...';
    
    // Get form data
    const formData = new FormData(this);
    
    // Get checked universities
    const universities = [];
    document.querySelectorAll('input[name="interestedUniversities"]:checked').forEach(cb => {
        universities.push(cb.value);
    });
    
    // Build data object
    const data = {
        name: formData.get('name'),
        email: formData.get('email'),
        phone: formData.get('phone'),
        city: formData.get('city'),
        interestedStream: formData.get('interestedStream'),
        interestedUniversities: universities,
        currentEducation: formData.get('currentEducation'),
        budgetRange: formData.get('budgetRange'),
        targetYear: formData.get('targetYear'),
        courseInterested: formData.get('courseInterested'),
        message: formData.get('message')
    };
    
    try {
        const response = await fetch('/api/leads/contact', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
        });
        
        const result = await response.json();
        
        if (result.success) {
            successMsg.classList.add('show');
            successMsg.innerHTML = '<i class="fas fa-check-circle"></i> ' + result.message;
            this.reset();
            
            // Scroll to message
            successMsg.scrollIntoView({ behavior: 'smooth', block: 'center' });
        } else {
            errorMsg.classList.add('show');
            errorMsg.innerHTML = '<i class="fas fa-exclamation-circle"></i> ' + result.message;
        }
    } catch (error) {
        console.error('Error:', error);
        errorMsg.classList.add('show');
        errorMsg.innerHTML = '<i class="fas fa-exclamation-circle"></i> Network error. Please try again.';
    } finally {
        // Re-enable button
        submitBtn.disabled = false;
        submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> Send Message';
    }
});
</script>

<%- include('partials/footer') %>
